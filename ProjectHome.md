For my project I have been studying VoiP Protocols and creating cross-platform peer-to-peer connections for Video/Voice chat utilizing STUN/ICE/WebRTC and Web Sockets. In this code repository is a simple example I wrote in Java that implements RFC 6455. I began by learning SIP on Asterisk, then I created a video system based on freeswitch. A difficulty I had was dynamically generating users but I used Ruby with Sinatra and a freeswitch module called mod\_xml\_curl to generate dynamic configuration files over http fed from a sqlite3 database.

There are several issues with cross-compatible video and audio communication technologies. The first tackled was that I wanted to make voice calls using SIP as my registrar from a webrtc client to a plain switched telephone network. WebRTC allows for UDP/TCP connections after a compatible SDP has been received. In order to get a compatible SDP, the PSTN VOIP provider must either support the secure RTP profile (SAVP/SRTP), or data must be converted with a media gateway. One exists and it is called webrtc2sip. When I realized that I wouldn't learn anything by using this I started developing my own RTP-SRTP gateway. I implemented the protocol successfully but I don't have time and money to reinvent to wheel.

I decided I should just concentrate on basic cross-platform video conferencing. Next, I started a new fork of googles apptc webrtc video chat, available here (secvidcon.appspot.com). Apprtc is amazing and google's developers were the first to nail cross platform webrtc clients. While Firefox and Chrome on Android contain a built in jingle clients (jingle is the webrtc engine), the way that really works is to use the jingle client compiled separately in its own app. I will post my version on this repository shortly. I was able to add an android web view client along with a shouldoverrideurl method that detects when a video chat link is clicked. What does this do? It allows anyone to easily implement a secure video conferencing system that can chat with anyone on any platform as a part of an integrate responsive web system.

After I got this system working I wanted to keep going and figure out exactly how to get through annoying NAT's. The solution that works is to use a TURN server. Mine runs on a2hosting and it forwards all traffic in crappy situations where packets are not properly traveling through the networking. One bug I saw when using a STUN is that networks will let a few UDP packets few and then slow the data rate, (effectively breaking the system). Turn seems to be the same type of fail save that skype uses only I don't do it on a distributed platform.